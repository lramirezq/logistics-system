<div class="container">
  <div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
      <h1>GestiÃ³n de Empresas</h1>
      <%= link_to "Nueva Empresa", new_company_path, class: "btn btn-primary" %>
    </div>

    <h2>Clientes</h2>
    <div style="margin-bottom: 2rem;">
      <% @clients.each do |client| %>
        <div class="card" style="margin-bottom: 1rem;">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
              <h3><%= link_to client.name, client %></h3>
              <p><%= client.email %> | <%= client.phone %></p>
              <small><%= pluralize(client.contacts.active.count, 'contacto') %> | <%= pluralize(client.subclients.count, 'subcliente') %> | <%= pluralize(client.client_providers.count, 'proveedor') %></small>
            </div>
            <div>
              <%= link_to client, title: "Ver", style: "margin-right: 0.5rem; color: #3b82f6; text-decoration: none; font-size: 1.2rem;" do %>
                ğŸ‘ï¸
              <% end %>
              <%= link_to edit_company_path(client), title: "Editar", style: "margin-right: 0.5rem; color: #f59e0b; text-decoration: none; font-size: 1.2rem;" do %>
                âœï¸
              <% end %>
              <%= link_to new_company_path(parent_id: client.id, relationship_type: 'subclient'), title: "Agregar Subcliente", style: "margin-right: 0.5rem; color: #10b981; text-decoration: none; font-size: 1.2rem;" do %>
                ğŸ‘¥
              <% end %>
              <%= link_to new_company_path(parent_id: client.id, relationship_type: 'provider'), title: "Agregar Proveedor", style: "color: #8b5cf6; text-decoration: none; font-size: 1.2rem;" do %>
                ğŸ­
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>

    <h2>Proveedores</h2>
    <div>
      <% @providers.each do |provider| %>
        <div class="card" style="margin-bottom: 1rem;">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
              <h3><%= link_to provider.name, provider %></h3>
              <p><%= provider.email %> | <%= provider.phone %></p>
              <small><%= pluralize(provider.contacts.active.count, 'contacto') %></small>
            </div>
            <div>
              <%= link_to provider, title: "Ver", style: "margin-right: 0.5rem; color: #3b82f6; text-decoration: none; font-size: 1.2rem;" do %>
                ğŸ‘ï¸
              <% end %>
              <%= link_to edit_company_path(provider), title: "Editar", style: "color: #f59e0b; text-decoration: none; font-size: 1.2rem;" do %>
                âœï¸
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>